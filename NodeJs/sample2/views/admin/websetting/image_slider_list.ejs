<%- contentFor('HeaderCss') %>
    <!-- perticular page css -->

    <!-- DataTables -->
    <link href="<%= process.env.AAP_URL %>public/plugins/datatables/dataTables.bootstrap4.min.css" rel="stylesheet"
        type="text/css" />
    <link href="<%= process.env.AAP_URL %>public/plugins/datatables/buttons.bootstrap4.min.css" rel="stylesheet"
        type="text/css" />
    <!-- Responsive datatable examples -->
    <link href="<%= process.env.AAP_URL %>public/plugins/datatables/responsive.bootstrap4.min.css" rel="stylesheet"
        type="text/css" />
    <!--sweetalert-->
    <link href="<%= process.env.AAP_URL %>public/plugins/sweet-alert2/sweetalert2.min.css" rel="stylesheet"
        type="text/css">

       <style>
            #pic{
                 height:102px; 
                width: 53%;
        }
       </style>
    <%- contentFor('body') %>

    <!-- Start content -->
    <div class="content">
        <div class="container-fluid">

            <div class="row">
                <div class="col-sm-12">
                    <div class="page-title-box">
                        <h4 class="page-title">Manage Static
                            Pages List</h4>
                        <!-- <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="/">Home</a></li>
                            <li class="breadcrumb-item"><a href="javascript:void(0);">CMS</a></li>
                            <li class="breadcrumb-item active">CMS List</li>
                        </ol> -->

                        <div class="state-information d-none d-sm-block">
                            <div class="state-graph">
                                <a href="<%= process.env.AAP_URL %>admin/slider_setting_list/create"
                                    class="btn btn-success waves-effect"> <i class=" fas fa-plus "></i> Create
                                    Image Slider</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- end row -->

            <div id="alert_msg" <% if(!msg_alert){ %> style="display: none;" <% } %>>
                    <div class="alert alert-<% if(msg_alert){ %><%= (msg_alert.type) ? 'success' : 'danger'  %> <% } %> alert-dismissible fade show"
                        id="alert_success" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <div class="msg">
                            <% if(msg_alert){ %>
                                <%= (msg_alert.message) ? msg_alert.message: '' %>
                                    <% } %>
                        </div>
                    </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <div class="card m-b-20">
                        <div class="card-body">
                            <table id="datatable-buttons"
                                class="table table-striped table-hover nowrap"
                                style="border-collapse: collapse; border-spacing: 0; width: 100%;">
                                <thead>
                                    <tr>
                                        <th>No</th>
                                        <th>Title</th>
                                        <th>Images</th>
                                       <!--  <th>Short Description</th> -->
                                        <th>Content</th>
                                        <th>Status</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <% data.forEach(rec=> { %>
                                        <tr>
                                            <td>
                                                <%= rec.id %>
                                            </td>
                                            <td>
                                                <%= rec.title %>
                                            </td>
                                                <td>
                                                    <img src="<%=process.env.AAP_URL%>images/<%= rec.images %>" id="pic" alt="">
                                                    <!-- <%= rec.images %> -->
                                            </td> 
                                             <td>
                                                <a href="<%= process.env.AAP_URL+'admin/slider_setting_list/viewcontent/'+rec.id %>"
                                                    target="_blank"><i class="fas fa-eye"></i></a>
                                            </td>
                                            <td>
                                                <% if(rec.status==1){ %>
                                                    <span class="badge badge-success"
                                                        style="font-size: 120%;">Active</span>
                                                    <% }else{ %>
                                                        <span class="badge badge-danger"
                                                            style="font-size: 120%;">Deactive</span>
                                                        <% } %>
                                            </td>
                                            <td>
                                                 <a href="<%= process.env.AAP_URL+'admin/slider_setting_list/edit/'+rec.id %>"
                                                    class="btn btn-outline-warning waves-effect waves-light edit_data"
                                                    data-toggle="tooltip" data-placement="top" title="Edit"><i
                                                        class="far fa-edit"></i></a>
                                                <button type="submit"
                                                    class="btn btn-outline-danger waves-effect waves-light "
                                                    data-toggle="tooltip" onclick="delete_data('<%= rec.id %>')"
                                                    data-placement="top" title="Delete"><i
                                                        class="far fa-trash-alt"></i></button>
 
                                            </td>
                                        </tr>
                                        <% }); %>
                            </table>
                        </div>
                    </div>
                </div> <!-- end col -->
            </div> <!-- end row -->
        </div> <!-- container-fluid -->
    </div> <!-- content -->

    <%- contentFor('FooterJs') %>

        <!-- Required datatable js -->
        <script src="<%= process.env.AAP_URL %>public/plugins/datatables/jquery.dataTables.min.js"></script>
        <script src="<%= process.env.AAP_URL %>public/plugins/datatables/dataTables.bootstrap4.min.js"></script>
        <!-- Buttons examples -->
        <script src="<%= process.env.AAP_URL %>public/plugins/datatables/dataTables.buttons.min.js"></script>
        <script src="<%= process.env.AAP_URL %>public/plugins/datatables/buttons.bootstrap4.min.js"></script>
        <script src="<%= process.env.AAP_URL %>public/plugins/datatables/jszip.min.js"></script>
        <script src="<%= process.env.AAP_URL %>public/plugins/datatables/pdfmake.min.js"></script>
        <script src="<%= process.env.AAP_URL %>public/plugins/datatables/vfs_fonts.js"></script>
        <script src="<%= process.env.AAP_URL %>public/plugins/datatables/buttons.html5.min.js"></script>
        <script src="<%= process.env.AAP_URL %>public/plugins/datatables/buttons.print.min.js"></script>
        <script src="<%= process.env.AAP_URL %>public/plugins/datatables/buttons.colVis.min.js"></script>
        <!-- Responsive examples -->
        <script src="<%= process.env.AAP_URL %>public/plugins/datatables/dataTables.responsive.min.js"></script>
        <script src="<%= process.env.AAP_URL %>public/plugins/datatables/responsive.bootstrap4.min.js"></script>

        <!-- Datatable init js -->
        <script src="<%= (auth_data.role == 'super_admin' ) ? process.env.AAP_URL+'public/assets/pages/super_admin_datatables.init.js' : process.env.AAP_URL+'public/assets/pages/admin_datatables.init.js'%>"></script>
        <script src="<%= process.env.AAP_URL %>public/plugins/parsleyjs/parsley.min.js"></script>
        <!--ajax form-->
        <script src="<%= process.env.AAP_URL %>public/plugins/ajax-form/jquery.form.min.js"></script>

        <!--sweetalert-->
        <script src="<%= process.env.AAP_URL %>public/plugins/sweet-alert2/sweetalert2.min.js"></script>
        <script>
            $(document).ready(function () {
                setTimeout(function () {
                    $('#alert_msg').hide();
                }, 5000);
            });
            function delete_data(id) {
                swal({
                    title: 'Are you sure?',
                    text: "You won't be able to revert this!",
                    type: 'warning',
                    showCancelButton: true,
                    confirmButtonClass: 'btn btn-success',
                    cancelButtonClass: 'btn btn-danger m-l-10',
                    confirmButtonText: 'Yes, delete it!'
                }).then(function () {
                    $.ajax({
                        url: "<%= process.env.AAP_URL %>admin/slider_setting_list/delete/" + id,
                        type: "get",
                        dataType: "json",
                        success: function (data) {
                            if (data.success == 1) {
                                get_data(data.data);
                                alert_msg("success", data.message);
                            } else {
                                alert_msg("error", data.message);
                            }

                        }
                    });
                });
            } 

            function get_data(data) {
                var data_table = $('#datatable-buttons').DataTable();
                data_table.clear().draw();
                $.each(data, function (index, value) {
                    var status_html = '';
                    var action = '<a href="<%= process.env.AAP_URL %>admin/slider_setting_list/edit/' + value.id + '" class="btn btn-outline-warning waves-effect waves-light edit_data" data-toggle="tooltip" data-placement="top" title="Edit"><i class="far fa-edit"></i></a>';
                    action += ' <button type="submit" class="btn btn-outline-danger waves-effect waves-light" onclick="delete_data(' + "'" + value.id + "'" + ')" data-toggle="tooltip" data-placement="top" title="Delete"><i class="far fa-trash-alt"></i></button>';
                    var content = ' <a href="<%= process.env.AAP_URL%>admin/slider_setting_list/viewcontent/' + value.id + '" target="_blank"><i class="fas fa-eye"></i></a>';
                    var image = '<img src="<%=process.env.AAP_URL%>images/' + value.images + '" id="pic" alt="">';
                    if (value.status == 1) {
                        status_html = '<span class="badge badge-success" style="font-size: 120%;">Active</span>';
                    } else {
                        status_html = '<span class="badge badge-danger" style="font-size: 120%;">Deactive</span>';
                    }
                    data_table.row.add([value.id, value.title, image, content, status_html, action]).draw(false);
                });
            }

            function alert_msg(status, msg) {
                //(success,danger)
                if (status != "success") {
                    status = "danger";
                }
                var html = '';
                html += '<div class="alert alert-' + status + ' alert-dismissible fade show" id="alert_success" role="alert">';
                html += '<button type="button" class="close" data-dismiss="alert" aria-label="Close">';
                html += '<span aria-hidden="true">&times;</span>';
                html += '</button>';
                html += '<div class="msg">' + msg + '</div>';
                html += '</div>';
                $("#alert_msg").html(html);
                $("#alert_msg").show();
                setTimeout(function () {
                    $('#alert_msg').hide();
                }, 5000);
            }
        </script>