<!-- Content Wrapper. Contains page content -->  <div class="content-wrapper">    <!-- Content Header (Page header) -->    <section class="content-header">      <h1>        Dashboard        <small>Admin</small>      </h1>      <ol class="breadcrumb">        <li><a href="<?php echo base_url(); ?>index.php/Dashboard"><i class="fa fa-dashboard"></i> Home</a></li>        <li class="active">Dashboard</li>      </ol>    </section>    <!-- Main content -->    <section class="content">		<?php 		$error_msg = $this->session->error_msg;		$success_msg = $this->session->success_msg;		if($error_msg != null){		?>			<div class="alert alert-danger alert-dismissible">				<button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>				<h4><i class="icon fa fa-ban"></i> Error!</h4>				<?php echo $error_msg; ?>			</div>		<?php }		if($success_msg != null){		?>			<div class="alert alert-success alert-dismissible">				<button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>				<h4><i class="icon fa fa-check"></i> Success!</h4>				<?php echo $success_msg; ?>			</div>		<?php } ?>      <!-- Small boxes (Stat box) -->	  <?php			foreach($assign_to_ma as $assign_to_man){				if($assign_to_man['status'] == 0 || $assign_to_man['status'] == 1 || $assign_to_man['status'] == 5 || $assign_to_man['status'] == 6)				{					$assignment_id[] = $assign_to_man['assignment_id'];				}				if($assign_to_man['status'] == 0)				{					$assignment_not_id[] = $assign_to_man['assignment_id'];				}				if($assign_to_man['status'] == 1)				{					$assignment_working_id[] = $assign_to_man['assignment_id'];				}				if($assign_to_man['status'] == 2)				{					$assignment_reject_id[] = $assign_to_man['assignment_id'];				}				if($assign_to_man['status'] == 5)				{					$assignment_complete_id[] = $assign_to_man['assignment_id'];				}			}			$new_count = 0;			$accepted_count = 0;			$assigned_count = 0;			$complete_count = 0;			$re_assigned_count = 0;			$rejected_count = 0;			$cancel_count = 0;			foreach($datas as $count){								$manager_id_count = $this->Mdl_dashboard->manager_id($count['id']);				$proof_reader_id_count = $this->Mdl_dashboard->proof_reader_id($count['id']);				$writer_id_count = $this->Mdl_dashboard->writer_id($count['id']);											if($count['status'] == 4)				{					$cancel_count++;				}else if($count['status'] == 1 || $count['status'] == 5){					if($manager_id_count == null){						$new_count++;					}else if($manager_id_count[0]['status'] == 0)					{						$assigned_count++;					}else if($manager_id_count[0]['status'] == 1)					{						$accepted_count++;					}else if($manager_id_count[0]['status'] == 2)					{						$re_assigned_count++;											}else if($manager_id_count[0]['status'] == 6)					{						$rejected_count++;					}else if($manager_id_count[0]['status'] == 5)					{						$complete_count++;					}				}else if($count['status'] == 5){					$complete_count++;				}						}		?>      <div class="row">				<div class="col-lg-2 col-xs-6">          <div class="small-box bg-green" onclick="onclick_box('New')" >            <div class="inner">				<h3><?php echo $new_count; ?></h3>              <!--<h3>53<sup style="font-size: 20px">%</sup></h3>-->              <p>New <br/> Assignment</p>            </div>            <div class="icon">              <i class="fa fa-shopping-cart"></i>            </div>          </div>        </div>	  		<div class="col-lg-2 col-xs-6">          <div class="small-box bg-yellow" onclick="onclick_box('Assigned')">            <div class="inner">              <h3><?php echo $assigned_count; ?></h3>              <p>Assigned <br/> Assignment</p>            </div>            <div class="icon">              <i class="fa fa-user"></i>            </div>          </div>        </div> 				<div class="col-lg-2 col-xs-6">          <div class="small-box bg-red" onclick="onclick_box('Re-Assigned')" >            <div class="inner">              <h3><?php echo $rejected_count; ?></h3>              <p>Re-Assigned <br/> Assignment</p>            </div>            <div class="icon">              <i class="fa fa-user-plus"></i>            </div>          </div>        </div>		<div class="col-lg-2 col-xs-6">          <div class="small-box bg-red" onclick="onclick_box('Rejected')" >            <div class="inner">              <h3><?php echo $re_assigned_count; ?></h3>              <p>Rejected <br/> Assignment</p>            </div>            <div class="icon">              <i class="fa fa-user-plus"></i>            </div>          </div>        </div>		        <div class="col-lg-2 col-xs-6">          <div class="small-box bg-aqua" onclick="onclick_box('Accepted')" >            <div class="inner">              <h3><?php echo $accepted_count;?></h3>              <p>Accepted <br/> Assignment</p>            </div>            <div class="icon">              <i class="fa fa-check"></i>            </div>          </div>        </div>				<div class="col-lg-2 col-xs-6">          <div class="small-box bg-green" onclick="onclick_box('complete')" >            <div class="inner">				<h3><?php echo $complete_count; ?></h3>              <!--<h3>53<sup style="font-size: 20px">%</sup></h3>-->              <p>Completed <br/> Assignment</p>            </div>            <div class="icon">              <i class="fa fa-file"></i>            </div>          </div>        </div>				<div class="col-lg-2 col-xs-6">          <div class="small-box bg-red" onclick="onclick_box('cancelled')" >            <div class="inner">              <h3><?php echo $cancel_count; ?></h3>              <p>Cancelled <br/> Assignment</p>            </div>            <div class="icon">              <i class="fa fa-exclamation-triangle"></i>            </div>          </div>        </div>		      </div>	  <script>		function onclick_box(id)		{			$('.actions_datatabl').DataTable().columns( 9 ).search( id ).draw();		}	  </script>      <!-- /.row -->	<div class="row">		<div class="col-xs-12">						<div class="box box-info">				<div class="box-header">					<h3 class="box-title">View Assignment Table</h3>				</div>				<!-- /.box-header -->				<div class="box-body">				<form method="post" class="login-form" action="<?php echo base_url(); ?>index.php/Dashboard/assignment_delete" enctype="multipart/form-data">					<!--<input type="checkbox" id="selectalls"/> &nbsp; Select This page &emsp;					<button type="submit" name="assignment_list_delete" value="delete" class="btn btn-default" ><i class="fa fa-trash-o"></i> Cancel </button>										<a class="btn btn-default" data-target="#assign" data-toggle="modal" onclick="chk_assignment()" ><i class="fa fa-pencil-square-o"></i> Assign </a>										<a class="btn btn-default" data-target="#re_assign" data-toggle="modal" onclick="chk_assignment()" ><i class="fa fa-pencil-square-o"></i> Re-Assign </a>										<a class="btn btn-default" onclick="complete_assignment()" ><i class="fa fa-check"></i> Complete </a>										<br/><br/>-->					<script>											function complete_assignment()						{							var all_location_id = document.querySelectorAll('input[name="select_assignment_list[]"]:checked');							var y = "";							for(var x = 0, l = all_location_id.length; x < l;  x++)							{								if(x == 0)								{									y = all_location_id[x].value;								}else{									y += ","+all_location_id[x].value;								}							}							$.ajax({								type: "POST",								url: '<?php echo base_url(); ?>index.php/Dashboard/complete_assignment_list',								data: { id: y, }, 								success: function(data){									location.reload();								},								error: function(){									console.log("data not found");								}							});						}					</script>										<table id="employee-grid" class="table table-bordered table-striped actions_datatabl">						<thead>							<tr>								<!--<th>  </th>-->								<th> ID </th>								<th> Name </th>								<th> Actions Time </th>								<th> Client ID </th>								<th> Manager </th>								<th> Proof Reader </th>								<th> Writer </th>								<th> Deadline </th>								<th> Admin Status </th>								<th> Manager Status </th>								<th> Writer Status </th>								<th> Proof Reader Status </th>								<th style="width: 164.183px;" > Actions </th>							</tr>						</thead>						<tbody>						<?php						$count = count($datas);						$dat = $datas;						$datas = array_slice($datas, 0, 10);						foreach($datas as $data) {													$manager_id = $this->Mdl_dashboard->manager_id($data['id']);							$proof_reader_id = $this->Mdl_dashboard->proof_reader_id($data['id']);							$writer_id = $this->Mdl_dashboard->writer_id($data['id']);														$manager_name = $this->Mdl_dashboard->user_get($manager_id[0]['manager_id']);							$proof_reader_name = $this->Mdl_dashboard->user_get($proof_reader_id[0]['proof_reader_id']);							$writer_name = $this->Mdl_dashboard->user_get($writer_id[0]['writer_id']);														$datetime1 = new DateTime($data['created_date']);							$datetime2 = new DateTime(date('Y-m-d H:i:s', strtotime( $data['deadline_date'].' '.$data['deadline_time'] )));														$interval = $datetime1->diff($datetime2);							$hours = $interval->h + ($interval->days*24);							$minit = $interval->i + ($hours*60);						?> 							<tr>								<!--<td>									<input type="checkbox" class="select_assignment" name="select_assignment_list[]" value="<?php echo $data['id']; ?>" >								</td>-->								<td>									<?php 										echo $data['id']; 										//echo $data['id'].' / '.$hours.':'.$interval->i.':'.$interval->s.' '; 										//echo gmdate("H:i", ($minit / 10)*9 * 60);									?>								</td>								<td><?php echo $data['name']; ?></td>								<td><?php echo date('m/d/Y H:i:s', strtotime( $data['created_date'] )); ?></td>								<td><?php echo $data['client_name']; ?></td>								<td><?php echo $manager_name[0]['name'];?></td>								<td><?php echo $proof_reader_name[0]['name'];?></td>								<td><?php echo $writer_name[0]['name'];?></td>								<td><?php echo date('m/d/Y', strtotime( $data['deadline_date'] )).' '.date('H:i', strtotime( $data['deadline_time'] )); ?></td>								<td align="center"> 									<?php										if($data['status'] == 4){											echo '<span class="label label-danger">Cancelled</span>';										}else if($data['status'] == 5){											echo '<span class="label label-success">Complete</span>';										}else if($manager_id == null){											echo '<span class="label label-success">New</span>';										}else if($manager_id[0]['status'] == 0 || $manager_id[0]['status'] == 1 || $manager_id[0]['status'] == 2 || $manager_id[0]['status'] == 5 || $manager_id[0]['status'] == 6){											echo '<span class="label label-warning">Assigned</span>';										}									?>													</td>								<td align="center"> 									<?php									if($manager_id != null)									{										if($data['status'] == 4)										{											echo '<span class="label label-danger">Cancelled</span>';										}else if($manager_id[0]['status'] == 0){											echo '<span class="label label-warning">Assigned</span>';										}else if($manager_id[0]['status'] == 1){											echo '<span class="label label-primary">Accepted</span>';										}else if($manager_id[0]['status'] == 2){											echo '<span class="label label-danger">Rejected</span>';										}else if($manager_id[0]['status'] == 5){											echo '<span class="label label-success">Complete</span>';										}else if($manager_id[0]['status'] == 6){											echo '<span class="label label-danger">Re-Assigned</span>';										}									}else if($data['status'] == 4){										echo '<span class="label label-danger">Cancelled</span>';									}else{										echo '<span class="label label-success">New</span>';									}										?>													</td>								<td align="center"> 									<?php									if($writer_id != null)									{										if($data['status'] == 4)										{											echo '<span class="label label-danger">Cancelled</span>';										}else if($writer_id[0]['status'] == 0){											echo '<span class="label label-warning">Assigned</span>';										}else if($writer_id[0]['status'] == 1){											echo '<span class="label label-primary">Accepted</span>';										}else if($writer_id[0]['status'] == 2){											echo '<span class="label label-danger">Rejected</span>';										}else if($writer_id[0]['status'] == 5){											echo '<span class="label label-success">Complete</span>';										}else if($writer_id[0]['status'] == 6){											echo '<span class="label label-danger">Re-Assigned</span>';										}									}else if($data['status'] == 4){										echo '<span class="label label-danger">Cancelled</span>';									}else{										echo '<span class="label label-success">New</span>';									}										?>													</td>																<td align="center"> 									<?php									if($proof_reader_id != null)									{										if($data['status'] == 4)										{											echo '<span class="label label-danger">Cancelled</span>';										}else if($proof_reader_id[0]['status'] == 0){											echo '<span class="label label-warning">Assigned</span>';										}else if($proof_reader_id[0]['status'] == 1){											echo '<span class="label label-primary">Accepted</span>';										}else if($proof_reader_id[0]['status'] == 2){											echo '<span class="label label-danger">Rejected</span>';										}else if($proof_reader_id[0]['status'] == 5){											echo '<span class="label label-success">Complete</span>';										}else if($proof_reader_id[0]['status'] == 6){											echo '<span class="label label-danger">Re-Assigned</span>';										}									}else if($data['status'] == 4){										echo '<span class="label label-danger">Cancelled</span>';									}else{										echo '<span class="label label-success">New</span>';									}										?>													</td>																<td>									<?php																		$view_url = "myModal('".base_url()."index.php/Dashboard/view_taske/".$data['id']."')";																		$taske_url = "myModal('".base_url()."index.php/Dashboard/taske_taske/".$data['id']."')";									$edit_url = "myModal('".base_url()."index.php/Dashboard/edit_taske/".$data['id']."')";									$assign_url = "myModal('".base_url()."index.php/Dashboard/assign_taske/".$data['id']."')";									$re_assign_url = "myModal('".base_url()."index.php/Dashboard/re_assign_taske/".$data['id']."')";																			echo '<a class="btn btn-default" onclick="'.$taske_url.'" ><i class="fa fa-eye"></i> Tasks </a>';										if($data['status'] == 4){											echo '<a class="btn btn-default" onclick="'.$view_url.'" ><i class="fa fa-eye"></i> View </a>';										}else if($data['status'] == 5){																						echo '<a class="btn btn-default" href="'.base_url().'index.php/Dashboard/assignment_view/'.$data['id'].'" ><i class="fa fa-eye"></i> View </a>';																					}else if($manager_id == null){											echo '<a class="btn btn-default" onclick="'.$view_url.'" ><i class="fa fa-eye"></i> View </a>';																						echo '<a class="btn btn-default" onclick="'.$edit_url.'" ><i class="fa fa-pencil-square-o"></i> Edit </a>';																						echo '<a class="btn btn-default" onclick="'.$assign_url.'" ><i class="fa fa-pencil-square-o"></i> Assign </a>';																					}else if($manager_id != null){											if($manager_id[0]['status'] == 1 || $manager_id[0]['status'] == 6 || $manager_id[0]['status'] == 0)											{												echo '<a class="btn btn-default" onclick="'.$view_url.'" ><i class="fa fa-eye"></i> View </a>';											}else if($manager_id[0]['status'] == 2)											{												echo '<a class="btn btn-default" onclick="'.$view_url.'" ><i class="fa fa-eye"></i> View </a>';																								echo '<a class="btn btn-default" onclick="'.$re_assign_url.'" ><i class="fa fa-pencil-square-o"></i> Re-Assign </a>';											}else if($manager_id[0]['status'] == 5)											{												echo '<a class="btn btn-default" href="'.base_url().'index.php/Dashboard/assignment_view/'.$data['id'].'" ><i class="fa fa-eye"></i> View </a>';																								echo '<a class="btn btn-default" onclick="'.$re_assign_url.'" ><i class="fa fa-pencil-square-o"></i> Re-Assign </a>';																								echo '<a class="btn btn-default" href="'.base_url().'index.php/Dashboard/complete_assignment/'.$data['id'].'" ><i class="fa fa-check"></i> Complete </a>';											}										}										if($data['status'] != 4 && $data['status'] != 5)										{											echo '<a class="btn btn-default" href="'.base_url().'index.php/Dashboard/assignment_delete/'.$data['id'].'" ><i class="fa fa-trash-o"></i> Cancel </a>';										}																				?>								</td>							</tr>						<?php } ?>						</tbody>						<tfoot>							<tr>								<!--<th>  </th>-->								<th> ID </th>								<th> Name </th>								<th> Actions Time </th>								<th> Client ID </th>								<th> Manager </th>								<th> Proof Reader </th>								<th> Writer </th>								<th> Deadline </th>								<th> Admin Status </th>								<th> Manager Status </th>								<th> Writer Status </th>								<th> Proof Reader Status </th>								<th> Actions </th>							</tr>						</tfoot>					</table>				</form>					<script>						$(document).ready(function() {							$('#employee-grid').DataTable( {								"processing": true,								"serverSide": true,								"ajax": "<?php echo base_url(); ?>index.php/Dashboard/user_data_get",								"deferLoading": <?php echo $count; ?>,								"order": [[ 2, "desc" ]]							} );						} );						$(function(){							$("#selectalls").click(function () {								  $('.select_assignment').attr('checked', this.checked);							});							$(".select_assignment").click(function(){								if($(".select_assignment").length == $(".select_assignment:checked").length) {									$("#selectalls").attr("checked", "checked");								} else {									$("#selectalls").removeAttr("checked");								}							});						});						function chk_assignment()						{							var all_location_id = document.querySelectorAll('input[name="select_assignment_list[]"]:checked');							var y = "";							for(var x = 0, l = all_location_id.length; x < l;  x++)							{								if(x == 0)								{									y = all_location_id[x].value;								}else{									y += ","+all_location_id[x].value;								}							}							$('#assignment_list_id').val(y);							$('#re_assignment_list_id').val(y);						}						function remove_file(ids,id)						{							var images_r = confirm("Are you sure want to delete?");								if (images_r == true) {								$.ajax({									type:'POST',									url: '<?php echo base_url(); ?>index.php/Assignment/remove_file',									data:{ id : id , ids : ids },									success:function(data){										location.reload();									}								});							}						}											</script>									<?php foreach($datas as $data) {?>						<script type="text/javascript">							CKEDITOR.replace('description_<?php echo $data['id']; ?>')						</script>					<?php } ?>										<div class="modal fade" id="assign">							<div class="modal-dialog">								<div class="modal-content">									<form method="post" class="login-form" action="<?php echo base_url(); ?>index.php/Dashboard/assign_to_list" enctype="multipart/form-data">										<div class="modal-header">											<button type="button" class="close" data-dismiss="modal" aria-label="Close">											<span aria-hidden="true">&times;</span></button>											<h4 class="modal-title">Assignment Assign To Manager</h4>										</div>										<div class="modal-body">										<input type="hidden" name="assignment_list_id" id="assignment_list_id" value="">											<div class="row">												<div class="col-xs-3">													 Online Managers												</div>												<div class="col-xs-6">													<select class="form-control" name="online_list" id="online_list" >														<option value="">Select Online Managers</option>														<?php foreach($online_managers as $online){?>															<option value="<?php echo $online['id']; ?>" ><?php echo $online['name']; ?></option>														<?php } ?>													</select>												</div>											</div></br>											<div class="row">												<div class="col-xs-3">													 Others Managers												</div>												<div class="col-xs-6">													<select class="form-control" name="others_list" id="others_list" >														<option value="">Select Others Managers</option>														<?php foreach($others_managers as $online){?>															<option value="<?php echo $online['id']; ?>" ><?php echo $online['name']; ?></option>														<?php } ?>													</select>												</div>											</div></br>																					</div>										<div class="modal-footer">											<button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>											<button type="submit" class="btn btn-primary">Assign</button>										</div>									</form>								</div>							</div>						</div>											<div class="modal fade" id="re_assign">							<div class="modal-dialog">								<div class="modal-content">									<form method="post" class="login-form" action="<?php echo base_url(); ?>index.php/Dashboard/re_assign_to_list" enctype="multipart/form-data">										<div class="modal-header">											<button type="button" class="close" data-dismiss="modal" aria-label="Close">											<span aria-hidden="true">&times;</span></button>											<h4 class="modal-title">Re-Assignment Assign To Manager</h4>										</div>										<div class="modal-body">										<input type="hidden" name="re_assignment_list_id" id="re_assignment_list_id" value="">											<div class="row">												<div class="col-xs-3">													 Online Managers												</div>												<div class="col-xs-6">													<select class="form-control" name="online_list" id="online_list" >														<option value="">Select Online Managers</option>														<?php foreach($online_managers as $online){?>															<option value="<?php echo $online['id']; ?>" ><?php echo $online['name']; ?></option>														<?php } ?>													</select>												</div>											</div></br>											<div class="row">												<div class="col-xs-3">													 Others Managers												</div>												<div class="col-xs-6">													<select class="form-control" name="others_list" id="others_list" >														<option value="">Select Others Managers</option>														<?php foreach($others_managers as $online){?>															<option value="<?php echo $online['id']; ?>" ><?php echo $online['name']; ?></option>														<?php } ?>													</select>												</div>											</div></br>																					</div>										<div class="modal-footer">											<button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>											<button type="submit" class="btn btn-primary">Re-Assign</button>										</div>									</form>								</div>							</div>						</div>												<script>					function myModal(url)					{						$('.myModal_content').load(url,function(){							$('#myModal').modal({show:true});						});					}				</script>				<div class="modal fade" id="myModal">					<div class="modal-dialog">						<div class="modal-content myModal_content">													</div>					</div>				</div>				</div>			</div>		</div>	</div>	     </section>    <!-- /.content -->  </div>  <!-- /.content-wrapper -->